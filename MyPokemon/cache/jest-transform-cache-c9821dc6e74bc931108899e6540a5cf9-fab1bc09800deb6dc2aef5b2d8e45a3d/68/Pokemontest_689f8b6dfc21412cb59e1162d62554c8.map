{"version":3,"names":["global","fetch","require","beforeEach","resetMocks","test","mockResponseOnce","JSON","stringify","ditto","handlePress","jest","fn","screen","act","render","name","url","expect","getByText","toBeTruthy","console","log","getByTestId","props","fireEvent","press","findByTestId","toBeCalledWith","source","uri","toEqual"],"sources":["Pokemon.test.js"],"sourcesContent":["import ditto from './ditto.json';\nimport {render, screen, fireEvent, act} from '@testing-library/react-native';\nimport 'react-native';\nimport React from 'react';\nimport Pokemon from '../UI/components/Pokemon';\nimport {getOnePokemon} from '../services/pokemonRequests';\n\nglobal.fetch = require('jest-fetch-mock');\n\nbeforeEach(() => {\n  fetch.resetMocks();\n});\n\n/*\ntest('returns result if object', () => {\n  fetch.mockResponseOnce(JSON.stringify(ditto));\n  const onResponse = jest.fn();\n  const onError = jest.fn();\n  return getOnePokemon()\n    .then(onResponse)\n    .catch(onError)\n    .finally(() => {\n      expect(onResponse).toHaveBeenCalled();\n      expect(onResponse.mock.calls[0][0]).toEqual(ditto);\n      console.log(onResponse.mock.calls);\n    });\n});\n*/\n\ntest('Does home screen work', async () => {\n  fetch.mockResponseOnce(JSON.stringify(ditto));\n  //jest.useFakeTimers();\n  const handlePress = jest.fn();\n  let screen;\n\n  await act(async () => {\n    screen = render(\n      <Pokemon\n        details={{\n          name: 'ditto',\n          url: 'https://pokeapi.co/api/v2/pokemon/1/',\n        }}\n        press={handlePress}\n      />,\n    );\n      expect(screen.getByText('ditto')).toBeTruthy();\n      console.log(screen.getByTestId('sprite').props);\n      //console.log(await screen.findByTestId('pressable'));\n      fireEvent.press(await screen.findByTestId('pressable'));\n      expect(handlePress).toBeCalledWith(ditto);\n      expect(screen.getByTestId('sprite').props.source.uri).toEqual(\n        'https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/132.png',\n      );\n    //jest.runAllTimers();\n  });\n  \n\n  //const pokes = await screen.getAllByTestId('bob');\n  //expect(pokes).toHaveLength(3);\n});\n"],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAA0D;AAE1DA,MAAM,CAACC,KAAK,GAAGC,OAAO,CAAC,iBAAiB,CAAC;AAEzCC,UAAU,CAAC,YAAM;EACfF,KAAK,CAACG,UAAU,EAAE;AACpB,CAAC,CAAC;AAkBFC,IAAI,CAAC,uBAAuB,kCAAE,aAAY;EACxCJ,KAAK,CAACK,gBAAgB,CAACC,IAAI,CAACC,SAAS,CAACC,cAAK,CAAC,CAAC;EAE7C,IAAMC,WAAW,GAAGC,IAAI,CAACC,EAAE,EAAE;EAC7B,IAAIC,MAAM;EAEV,MAAM,IAAAC,gBAAG,kCAAC,aAAY;IACpBD,MAAM,GAAG,IAAAE,mBAAM,EACb,qBAAC,gBAAO;MACN,OAAO,EAAE;QACPC,IAAI,EAAE,OAAO;QACbC,GAAG,EAAE;MACP,CAAE;MACF,KAAK,EAAEP;IAAY,EACnB,CACH;IACCQ,MAAM,CAACL,MAAM,CAACM,SAAS,CAAC,OAAO,CAAC,CAAC,CAACC,UAAU,EAAE;IAC9CC,OAAO,CAACC,GAAG,CAACT,MAAM,CAACU,WAAW,CAAC,QAAQ,CAAC,CAACC,KAAK,CAAC;IAE/CC,sBAAS,CAACC,KAAK,OAAOb,MAAM,CAACc,YAAY,CAAC,WAAW,CAAC,CAAC;IACvDT,MAAM,CAACR,WAAW,CAAC,CAACkB,cAAc,CAACnB,cAAK,CAAC;IACzCS,MAAM,CAACL,MAAM,CAACU,WAAW,CAAC,QAAQ,CAAC,CAACC,KAAK,CAACK,MAAM,CAACC,GAAG,CAAC,CAACC,OAAO,CAC3D,kFAAkF,CACnF;EAEL,CAAC,EAAC;AAKJ,CAAC,EAAC"}