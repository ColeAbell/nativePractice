{"version":3,"names":["defaultProps","withOverlay","overlayColor","highlightColor","withPointer","toggleOnPress","toggleAction","height","width","containerStyle","backgroundColor","onClose","onOpen","skipAndroidStatusBar","ModalComponent","Modal","closeOnlyOnBackdropPress","Tooltip","arguments","_isMounted","state","isVisible","yOffset","xOffset","elementWidth","elementHeight","toggleTooltip","props","getElementPosition","setState","prevState","wrapWithPress","children","flex","getTooltipStyle","getTooltipCoordinate","ScreenWidth","ScreenHeight","x","y","StyleSheet","flatten","position","I18nManager","isRTL","renderPointer","tooltipY","pointerColor","pastMiddleLine","top","getElementVisibleWidth","borderBottomColor","getTooltipHighlightedButtonStyle","renderTouchableHighlightedButton","TooltipHighlightedButtonStyle","renderStaticHighlightedButton","renderHighlightedButton","renderContent","withTooltip","popover","tooltipStyle","renderedElement","measure","_frameOffsetX","_frameOffsetY","pageOffsetX","pageOffsetY","isIOS","Platform","select","android","StatusBar","currentHeight","ios","default","renderStaticModalContent","renderTogglingModalContent","renderModalContent","requestAnimationFrame","e","React","Component","withTheme"],"sources":["Tooltip.js"],"sourcesContent":["import React, { Fragment } from 'react';\nimport { TouchableOpacity, Modal, View, StatusBar, I18nManager, StyleSheet, Platform, } from 'react-native';\nimport { withTheme } from '../config';\nimport { ScreenWidth, ScreenHeight, isIOS } from '../helpers';\nimport Triangle from './Triangle';\nimport getTooltipCoordinate, { getElementVisibleWidth, } from './getTooltipCoordinate';\nconst defaultProps = {\n    withOverlay: true,\n    overlayColor: 'rgba(250, 250, 250, 0.70)',\n    highlightColor: 'transparent',\n    withPointer: true,\n    toggleOnPress: true,\n    toggleAction: 'onPress',\n    height: 40,\n    width: 150,\n    containerStyle: {},\n    backgroundColor: '#617080',\n    onClose: () => { },\n    onOpen: () => { },\n    skipAndroidStatusBar: false,\n    ModalComponent: Modal,\n    closeOnlyOnBackdropPress: false,\n};\nclass Tooltip extends React.Component {\n    constructor() {\n        super(...arguments);\n        this._isMounted = false;\n        this.state = {\n            isVisible: false,\n            yOffset: 0,\n            xOffset: 0,\n            elementWidth: 0,\n            elementHeight: 0,\n        };\n        this.toggleTooltip = () => {\n            const { onClose } = this.props;\n            this.getElementPosition();\n            this._isMounted &&\n                this.setState((prevState) => {\n                    if (prevState.isVisible) {\n                        onClose && onClose();\n                    }\n                    return { isVisible: !prevState.isVisible };\n                });\n        };\n        this.wrapWithPress = (toggleOnPress, toggleAction, children) => {\n            if (toggleOnPress) {\n                return (<TouchableOpacity {...{ [toggleAction]: this.toggleTooltip }} delayLongPress={250} activeOpacity={1}>\n          {children}\n        </TouchableOpacity>);\n            }\n            return children;\n        };\n        this.containerStyle = (withOverlay, overlayColor) => {\n            return {\n                backgroundColor: withOverlay ? overlayColor : 'transparent',\n                flex: 1,\n            };\n        };\n        this.getTooltipStyle = () => {\n            const { yOffset, xOffset, elementHeight, elementWidth } = this.state;\n            const { height, backgroundColor, width, withPointer, containerStyle, } = this.props;\n            const { x, y } = getTooltipCoordinate(xOffset, yOffset, elementWidth, elementHeight, ScreenWidth, ScreenHeight, width, height, withPointer);\n            return StyleSheet.flatten([\n                {\n                    position: 'absolute',\n                    [I18nManager.isRTL ? 'right' : 'left']: x,\n                    top: y,\n                    width,\n                    height,\n                    backgroundColor,\n                    // default styles\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    flex: 1,\n                    borderRadius: 10,\n                    padding: 10,\n                },\n                containerStyle,\n            ]);\n        };\n        this.renderPointer = (tooltipY) => {\n            const { yOffset, xOffset, elementHeight, elementWidth } = this.state;\n            const { backgroundColor, pointerColor } = this.props;\n            const pastMiddleLine = yOffset > (tooltipY || 0);\n            return (<View style={{\n                    position: 'absolute',\n                    top: pastMiddleLine ? yOffset - 13 : yOffset + elementHeight - 2,\n                    [I18nManager.isRTL ? 'right' : 'left']: xOffset +\n                        getElementVisibleWidth(elementWidth, xOffset, ScreenWidth) / 2 -\n                        7.5,\n                }}>\n        <Triangle style={{ borderBottomColor: pointerColor || backgroundColor }} isDown={pastMiddleLine}/>\n      </View>);\n        };\n        this.getTooltipHighlightedButtonStyle = () => {\n            const { highlightColor } = this.props;\n            const { yOffset, xOffset, elementWidth, elementHeight } = this.state;\n            return {\n                position: 'absolute',\n                top: yOffset,\n                [I18nManager.isRTL ? 'right' : 'left']: xOffset,\n                backgroundColor: highlightColor,\n                overflow: 'visible',\n                width: elementWidth,\n                height: elementHeight,\n            };\n        };\n        this.renderTouchableHighlightedButton = () => {\n            const TooltipHighlightedButtonStyle = this.getTooltipHighlightedButtonStyle();\n            return (<TouchableOpacity testID=\"tooltipTouchableHighlightedButton\" onPress={() => this.toggleTooltip()} style={TooltipHighlightedButtonStyle}>\n        {this.props.children}\n      </TouchableOpacity>);\n        };\n        this.renderStaticHighlightedButton = () => {\n            const TooltipHighlightedButtonStyle = this.getTooltipHighlightedButtonStyle();\n            return (<View style={TooltipHighlightedButtonStyle}>{this.props.children}</View>);\n        };\n        this.renderHighlightedButton = () => {\n            const { closeOnlyOnBackdropPress } = this.props;\n            if (closeOnlyOnBackdropPress) {\n                return this.renderTouchableHighlightedButton();\n            }\n            else {\n                return this.renderStaticHighlightedButton();\n            }\n        };\n        this.renderContent = (withTooltip) => {\n            const { popover, withPointer, toggleOnPress, toggleAction } = this.props;\n            if (!withTooltip) {\n                return this.wrapWithPress(toggleOnPress, toggleAction, this.props.children);\n            }\n            const tooltipStyle = this.getTooltipStyle();\n            return (<View>\n        {this.renderHighlightedButton()}\n        {withPointer && this.renderPointer(tooltipStyle.top)}\n        <View style={tooltipStyle} testID=\"tooltipPopoverContainer\">\n          {popover}\n        </View>\n      </View>);\n        };\n        this.getElementPosition = () => {\n            const { skipAndroidStatusBar } = this.props;\n            this.renderedElement &&\n                this.renderedElement.measure((_frameOffsetX, _frameOffsetY, width, height, pageOffsetX, pageOffsetY) => {\n                    this._isMounted &&\n                        this.setState({\n                            xOffset: pageOffsetX,\n                            yOffset: isIOS || skipAndroidStatusBar\n                                ? pageOffsetY\n                                : pageOffsetY -\n                                    Platform.select({\n                                        android: StatusBar.currentHeight,\n                                        ios: 20,\n                                        default: 0,\n                                    }),\n                            elementWidth: width,\n                            elementHeight: height,\n                        });\n                });\n        };\n        this.renderStaticModalContent = () => {\n            const { withOverlay, overlayColor } = this.props;\n            return (<Fragment>\n        <TouchableOpacity style={this.containerStyle(withOverlay, overlayColor)} onPress={this.toggleTooltip} activeOpacity={1}/>\n        <View>{this.renderContent(true)}</View>\n      </Fragment>);\n        };\n        this.renderTogglingModalContent = () => {\n            const { withOverlay, overlayColor } = this.props;\n            return (<TouchableOpacity style={this.containerStyle(withOverlay, overlayColor)} onPress={this.toggleTooltip} activeOpacity={1}>\n        {this.renderContent(true)}\n      </TouchableOpacity>);\n        };\n        this.renderModalContent = () => {\n            const { closeOnlyOnBackdropPress } = this.props;\n            if (closeOnlyOnBackdropPress) {\n                return this.renderStaticModalContent();\n            }\n            else {\n                return this.renderTogglingModalContent();\n            }\n        };\n    }\n    componentDidMount() {\n        this._isMounted = true;\n        // wait to compute onLayout values.\n        requestAnimationFrame(this.getElementPosition);\n    }\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n    render() {\n        const { isVisible } = this.state;\n        const { onOpen, ModalComponent } = this.props;\n        return (<View collapsable={false} ref={(e) => {\n                this.renderedElement = e;\n            }}>\n        {this.renderContent(false)}\n        <ModalComponent animationType=\"fade\" visible={isVisible} transparent onShow={onOpen}>\n          {this.renderModalContent()}\n        </ModalComponent>\n      </View>);\n    }\n}\nTooltip.defaultProps = defaultProps;\nexport { Tooltip };\nexport default withTheme(Tooltip, 'Tooltip');\n"],"mappings":"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"}