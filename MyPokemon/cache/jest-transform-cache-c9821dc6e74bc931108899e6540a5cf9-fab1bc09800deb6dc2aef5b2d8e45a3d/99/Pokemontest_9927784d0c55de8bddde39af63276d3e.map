{"version":3,"names":["global","fetch","require","beforeEach","resetMocks","test","console","log","pokereq","getOnePokemon","jest","fn","mockImplementation","url","ditto","handlePress","tree","render","name","expect","toHaveBeenCalled","waitFor","screen","getByText","toBeTruthy","getByTestId","props","source","uri","toEqual","fireEvent","press","findByTestId","toBeCalledWith","toBeCalled"],"sources":["Pokemon.test.js"],"sourcesContent":["import ditto from './ditto.json';\nimport {\n  render,\n  screen,\n  fireEvent,\n  act,\n  waitFor,\n} from '@testing-library/react-native';\nimport 'react-native';\nimport React from 'react';\nimport Pokemon from '../UI/components/Pokemon';\nimport * as pokereq from '../services/pokemonRequests';\n\nglobal.fetch = require('jest-fetch-mock');\n\nbeforeEach(() => {\n  fetch.resetMocks();\n});\n\n/*\ntest('returns result if object', () => {\n  fetch.mockResponseOnce(JSON.stringify(ditto));\n  const onResponse = jest.fn();\n  const onError = jest.fn();\n  return getOnePokemon()\n    .then(onResponse)\n    .catch(onError)\n    .finally(() => {\n      expect(onResponse).toHaveBeenCalled();\n      expect(onResponse.mock.calls[0][0]).toEqual(ditto);\n      console.log(onResponse.mock.calls);\n    });\n});\n*/\n\ntest('Does home screen work', async () => {\n  //fetch.mockResponseOnce(JSON.stringify(ditto));\n  console.log(pokereq);\n  /*\n  jest.spyOn(pokereq, 'getOnePokemon').mockImplementation(() => {\n    return JSON.stringify(ditto);\n  });\n  */\n  pokereq.getOnePokemon = jest.fn().mockImplementation(url => {\n    console.log(url);\n    return ditto;\n  });\n  //jest.useFakeTimers();\n  const handlePress = jest.fn();\n  //async function wait() {\n  const tree = render(\n    <Pokemon\n      details={{\n        name: 'ditto',\n        url: 'https://pokeapi.co/api/v2/pokemon/1/',\n      }}\n      press={handlePress}\n    />,\n  );\n\n  //}\n  //await wait();\n  /*\n    await act(async () => {\n      jest.runAllTimers();\n    });\n    */\n\n  expect(pokereq.getOnePokemon).toHaveBeenCalled();\n  console.log('it fired');\n\n  await waitFor(() => {\n    expect(screen.getByText('ditto')).toBeTruthy();\n  });\n  expect(screen.getByTestId('sprite').props.source.uri).toEqual(\n    'https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/132.png',\n  );\n\n  fireEvent.press(await screen.findByTestId('pressable'));\n  expect(handlePress).toBeCalledWith(ditto);\n  expect(pokereq.getOnePokemon).toBeCalled();\n});\n"],"mappings":";;;;AAAA;AACA;AAOA;AACA;AACA;AACA;AAAuD;AAAA;AAAA;AAEvDA,MAAM,CAACC,KAAK,GAAGC,OAAO,CAAC,iBAAiB,CAAC;AAEzCC,UAAU,CAAC,YAAM;EACfF,KAAK,CAACG,UAAU,EAAE;AACpB,CAAC,CAAC;AAkBFC,IAAI,CAAC,uBAAuB,kCAAE,aAAY;EAExCC,OAAO,CAACC,GAAG,CAACC,OAAO,CAAC;EAMpBA,OAAO,CAACC,aAAa,GAAGC,IAAI,CAACC,EAAE,EAAE,CAACC,kBAAkB,CAAC,UAAAC,GAAG,EAAI;IAC1DP,OAAO,CAACC,GAAG,CAACM,GAAG,CAAC;IAChB,OAAOC,cAAK;EACd,CAAC,CAAC;EAEF,IAAMC,WAAW,GAAGL,IAAI,CAACC,EAAE,EAAE;EAE7B,IAAMK,IAAI,GAAG,IAAAC,mBAAM,EACjB,qBAAC,gBAAO;IACN,OAAO,EAAE;MACPC,IAAI,EAAE,OAAO;MACbL,GAAG,EAAE;IACP,CAAE;IACF,KAAK,EAAEE;EAAY,EACnB,CACH;EAUDI,MAAM,CAACX,OAAO,CAACC,aAAa,CAAC,CAACW,gBAAgB,EAAE;EAChDd,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC;EAEvB,MAAM,IAAAc,oBAAO,EAAC,YAAM;IAClBF,MAAM,CAACG,mBAAM,CAACC,SAAS,CAAC,OAAO,CAAC,CAAC,CAACC,UAAU,EAAE;EAChD,CAAC,CAAC;EACFL,MAAM,CAACG,mBAAM,CAACG,WAAW,CAAC,QAAQ,CAAC,CAACC,KAAK,CAACC,MAAM,CAACC,GAAG,CAAC,CAACC,OAAO,CAC3D,kFAAkF,CACnF;EAEDC,sBAAS,CAACC,KAAK,OAAOT,mBAAM,CAACU,YAAY,CAAC,WAAW,CAAC,CAAC;EACvDb,MAAM,CAACJ,WAAW,CAAC,CAACkB,cAAc,CAACnB,cAAK,CAAC;EACzCK,MAAM,CAACX,OAAO,CAACC,aAAa,CAAC,CAACyB,UAAU,EAAE;AAC5C,CAAC,EAAC"}