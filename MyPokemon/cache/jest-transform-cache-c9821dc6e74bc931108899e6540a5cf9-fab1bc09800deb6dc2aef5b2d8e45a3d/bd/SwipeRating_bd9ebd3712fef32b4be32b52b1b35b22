a14bf870bd4d85d65ed8230ce8aed944
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _react = _interopRequireWildcard(require("react"));
var _times = _interopRequireDefault(require("lodash/times"));
var _reactNative = require("react-native");
var _jsxRuntime = require("react/jsx-runtime");
function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }
function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }
function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }
function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }
var STAR_IMAGE = require("./images/star.png");
var HEART_IMAGE = require("./images/heart.png");
var ROCKET_IMAGE = require("./images/rocket.png");
var BELL_IMAGE = require("./images/bell.png");
var TYPES = {
  star: {
    source: STAR_IMAGE,
    color: "#f1c40f",
    backgroundColor: "white"
  },
  heart: {
    source: HEART_IMAGE,
    color: "#e74c3c",
    backgroundColor: "white"
  },
  rocket: {
    source: ROCKET_IMAGE,
    color: "#2ecc71",
    backgroundColor: "white"
  },
  bell: {
    source: BELL_IMAGE,
    color: "#f39c12",
    backgroundColor: "white"
  },
  custom: {}
};
var fractionsType = function fractionsType(props, propName, componentName) {
  if (props[propName]) {
    var value = props[propName];
    if (typeof value === "number") {
      return value >= 0 && value <= 20 ? null : new Error("`" + propName + "` in `" + componentName + "` must be between 0 and 20");
    }
    return new Error("`" + propName + "` in `" + componentName + "` must be a number");
  }
};
var SwipeRating = function (_Component) {
  (0, _inherits2.default)(SwipeRating, _Component);
  var _super = _createSuper(SwipeRating);
  function SwipeRating(props) {
    var _this;
    (0, _classCallCheck2.default)(this, SwipeRating);
    _this = _super.call(this, props);
    var _this$props = _this.props,
      onStartRating = _this$props.onStartRating,
      onSwipeRating = _this$props.onSwipeRating,
      onFinishRating = _this$props.onFinishRating,
      fractions = _this$props.fractions;
    var position = new _reactNative.Animated.ValueXY();
    var panResponder = _reactNative.PanResponder.create({
      onStartShouldSetPanResponder: function onStartShouldSetPanResponder() {
        return true;
      },
      onPanResponderGrant: function onPanResponderGrant(event, gesture) {
        var newPosition = new _reactNative.Animated.ValueXY();
        var tapPositionX = gesture.x0 - _this.state.centerX + gesture.dx;
        newPosition.setValue({
          x: tapPositionX,
          y: 0
        });
        if (_this.state.isComponentMounted) {
          _this.setState({
            position: newPosition,
            value: tapPositionX
          });
          var rating = _this.getCurrentRating(tapPositionX);
          if (typeof onStartRating === "function") {
            onStartRating(rating);
          }
        }
      },
      onPanResponderMove: function onPanResponderMove(event, gesture) {
        var newPosition = new _reactNative.Animated.ValueXY();
        var tapPositionX = gesture.x0 - _this.state.centerX + gesture.dx;
        newPosition.setValue({
          x: tapPositionX,
          y: 0
        });
        if (_this.state.isComponentMounted) {
          _this.setState({
            position: newPosition,
            value: tapPositionX
          });
          var rating = _this.getCurrentRating(tapPositionX);
          if (typeof onSwipeRating === "function") {
            onSwipeRating(rating);
          }
        }
      },
      onPanResponderRelease: function onPanResponderRelease() {
        var rating = _this.getCurrentRating(_this.state.value);
        if (rating >= _this.props.minValue) {
          if (!fractions) {
            _this.setCurrentRating(rating);
          }
          if (typeof onFinishRating === "function") {
            onFinishRating(rating);
          }
        }
      }
    });
    _this.state = {
      panResponder: panResponder,
      position: position,
      display: false,
      isComponentMounted: false
    };
    return _this;
  }
  (0, _createClass2.default)(SwipeRating, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      var _this2 = this;
      try {
        this.setState({
          display: true,
          isComponentMounted: true
        }, function () {
          return _this2.setCurrentRating(_this2.props.startingValue);
        });
      } catch (err) {
        console.log(err);
      }
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps) {
      if (this.props.startingValue !== prevProps.startingValue) {
        this.setCurrentRating(this.props.startingValue);
      }
    }
  }, {
    key: "handleLayoutChange",
    value: function handleLayoutChange() {
      var _this3 = this;
      this.ratingRef.measure(function (fx, fy, width, height, px) {
        var halfWidth = width / 2;
        var pageXWithinWindow = px % _reactNative.Dimensions.get("window").width;
        _this3.setState({
          centerX: pageXWithinWindow + halfWidth
        });
      });
    }
  }, {
    key: "getPrimaryViewStyle",
    value: function getPrimaryViewStyle() {
      var position = this.state.position;
      var _this$props2 = this.props,
        imageSize = _this$props2.imageSize,
        ratingCount = _this$props2.ratingCount,
        type = _this$props2.type;
      var color = TYPES[type].color;
      var width = position.x.interpolate({
        inputRange: [-ratingCount * (imageSize / 2), 0, ratingCount * (imageSize / 2)],
        outputRange: [0, ratingCount * imageSize / 2, ratingCount * imageSize],
        extrapolate: "clamp"
      }, {
        useNativeDriver: true
      });
      return {
        backgroundColor: color,
        width: width,
        height: width ? imageSize : 0
      };
    }
  }, {
    key: "getSecondaryViewStyle",
    value: function getSecondaryViewStyle() {
      var position = this.state.position;
      var _this$props3 = this.props,
        imageSize = _this$props3.imageSize,
        ratingCount = _this$props3.ratingCount,
        type = _this$props3.type;
      var backgroundColor = TYPES[type].backgroundColor;
      var width = position.x.interpolate({
        inputRange: [-ratingCount * (imageSize / 2), 0, ratingCount * (imageSize / 2)],
        outputRange: [ratingCount * imageSize, ratingCount * imageSize / 2, 0],
        extrapolate: "clamp"
      }, {
        useNativeDriver: true
      });
      return {
        backgroundColor: backgroundColor,
        width: width,
        height: width ? imageSize : 0
      };
    }
  }, {
    key: "renderRatings",
    value: function renderRatings() {
      var _this$props4 = this.props,
        imageSize = _this$props4.imageSize,
        ratingCount = _this$props4.ratingCount,
        type = _this$props4.type,
        tintColor = _this$props4.tintColor;
      var source = TYPES[type].source;
      return (0, _times.default)(ratingCount, function (index) {
        return (0, _jsxRuntime.jsx)(_reactNative.View, {
          style: styles.starContainer,
          children: (0, _jsxRuntime.jsx)(_reactNative.Image, {
            source: source,
            style: {
              width: imageSize,
              height: imageSize,
              tintColor: tintColor
            }
          })
        }, index);
      });
    }
  }, {
    key: "getCurrentRating",
    value: function getCurrentRating(value) {
      var _this$props5 = this.props,
        fractions = _this$props5.fractions,
        imageSize = _this$props5.imageSize,
        ratingCount = _this$props5.ratingCount;
      var startingValue = ratingCount / 2;
      var currentRating = this.props.minValue ? this.props.minValue : 0;
      if (value > ratingCount * imageSize / 2) {
        currentRating = ratingCount;
      } else if (value < -ratingCount * imageSize / 2) {
        currentRating = this.props.minValue ? this.props.minValue : 0;
      } else if (value <= imageSize || value > imageSize) {
        var diff = value / imageSize;
        currentRating = startingValue + diff;
        currentRating = fractions ? Number(currentRating.toFixed(fractions)) : Math.ceil(currentRating);
      } else {
        currentRating = fractions ? Number(startingValue.toFixed(fractions)) : Math.ceil(startingValue);
      }
      if (this.props.jumpValue > 0 && this.props.jumpValue < this.props.ratingCount) {
        return Math.ceil(currentRating * (1 / this.props.jumpValue)) / (1 / this.props.jumpValue);
      } else {
        return currentRating;
      }
    }
  }, {
    key: "setCurrentRating",
    value: function setCurrentRating(rating) {
      var _this$props6 = this.props,
        imageSize = _this$props6.imageSize,
        ratingCount = _this$props6.ratingCount;
      var initialRating = ratingCount / 2;
      var value = null;
      if (rating > ratingCount) {
        value = ratingCount * imageSize / 2;
      } else if (rating < 0) {
        value = -ratingCount * imageSize / 2;
      } else if (rating < ratingCount / 2 || rating > ratingCount / 2) {
        value = (rating - initialRating) * imageSize;
      } else {
        value = 0;
      }
      var newPosition = new _reactNative.Animated.ValueXY();
      newPosition.setValue({
        x: value,
        y: 0
      });
      if (this.state.isComponentMounted) {
        this.setState({
          position: newPosition,
          value: value
        });
      }
    }
  }, {
    key: "displayCurrentRating",
    value: function displayCurrentRating() {
      var _this$props7 = this.props,
        ratingCount = _this$props7.ratingCount,
        type = _this$props7.type,
        readonly = _this$props7.readonly,
        showReadOnlyText = _this$props7.showReadOnlyText,
        ratingTextColor = _this$props7.ratingTextColor;
      var color = ratingTextColor || TYPES[type].color;
      return (0, _jsxRuntime.jsxs)(_reactNative.View, {
        style: styles.showRatingView,
        children: [(0, _jsxRuntime.jsxs)(_reactNative.View, {
          style: styles.ratingView,
          children: [(0, _jsxRuntime.jsx)(_reactNative.Text, {
            style: [styles.ratingText, {
              color: color
            }],
            children: "Rating: "
          }), (0, _jsxRuntime.jsx)(_reactNative.Text, {
            style: [styles.currentRatingText, {
              color: color
            }],
            children: this.getCurrentRating(this.state.value)
          }), (0, _jsxRuntime.jsxs)(_reactNative.Text, {
            style: [styles.maxRatingText, {
              color: color
            }],
            children: ["/", ratingCount]
          })]
        }), (0, _jsxRuntime.jsx)(_reactNative.View, {
          children: readonly && showReadOnlyText && (0, _jsxRuntime.jsx)(_reactNative.Text, {
            style: [styles.readonlyLabel, {
              color: color
            }],
            children: "(readonly)"
          })
        })]
      });
    }
  }, {
    key: "render",
    value: function render() {
      var _this4 = this;
      var _this$props8 = this.props,
        readonly = _this$props8.readonly,
        type = _this$props8.type,
        ratingImage = _this$props8.ratingImage,
        ratingColor = _this$props8.ratingColor,
        ratingBackgroundColor = _this$props8.ratingBackgroundColor,
        style = _this$props8.style,
        showRating = _this$props8.showRating;
      if (type === "custom") {
        var custom = {
          source: ratingImage,
          color: ratingColor,
          backgroundColor: ratingBackgroundColor
        };
        TYPES.custom = custom;
      }
      return this.state.display ? (0, _jsxRuntime.jsxs)(_reactNative.View, {
        pointerEvents: readonly ? "none" : "auto",
        style: style,
        children: [showRating && this.displayCurrentRating(), (0, _jsxRuntime.jsxs)(_reactNative.View, Object.assign({
          style: styles.starsWrapper
        }, this.state.panResponder.panHandlers, {
          children: [(0, _jsxRuntime.jsxs)(_reactNative.View, {
            style: styles.starsInsideWrapper,
            onLayout: function onLayout() {
              _this4.handleLayoutChange();
            },
            ref: function ref(view) {
              _this4.ratingRef = view;
            },
            children: [(0, _jsxRuntime.jsx)(_reactNative.Animated.View, {
              style: this.getPrimaryViewStyle()
            }), (0, _jsxRuntime.jsx)(_reactNative.Animated.View, {
              style: this.getSecondaryViewStyle()
            })]
          }), this.renderRatings()]
        }))]
      }) : null;
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      this.setState({
        isComponentMounted: false
      });
    }
  }]);
  return SwipeRating;
}(_react.Component);
exports.default = SwipeRating;
SwipeRating.defaultProps = {
  type: "star",
  ratingImage: STAR_IMAGE,
  ratingColor: "#f1c40f",
  ratingBackgroundColor: "white",
  ratingCount: 5,
  showReadOnlyText: true,
  imageSize: 40,
  minValue: 0,
  jumpValue: 0
};
var styles = _reactNative.StyleSheet.create({
  starsWrapper: {
    flexDirection: "row",
    justifyContent: "center",
    alignItems: "center"
  },
  starsInsideWrapper: {
    position: "absolute",
    top: 0,
    left: 0,
    right: 0,
    bottom: 0,
    flexDirection: "row",
    justifyContent: "center",
    alignItems: "center"
  },
  showRatingView: {
    flexDirection: "column",
    justifyContent: "center",
    alignItems: "center",
    paddingBottom: 5
  },
  ratingView: {
    flexDirection: "row",
    justifyContent: "center",
    alignItems: "center",
    paddingBottom: 5
  },
  ratingText: {
    fontSize: 15,
    textAlign: "center",
    fontFamily: _reactNative.Platform.OS === "ios" ? "Trebuchet MS" : null,
    color: "#34495e"
  },
  readonlyLabel: {
    justifyContent: "center",
    alignItems: "center",
    fontSize: 12,
    textAlign: "center",
    fontFamily: _reactNative.Platform.OS === "ios" ? "Trebuchet MS" : null,
    color: "#34495a"
  },
  currentRatingText: {
    fontSize: 30,
    textAlign: "center",
    fontFamily: _reactNative.Platform.OS === "ios" ? "Trebuchet MS" : null
  },
  maxRatingText: {
    fontSize: 18,
    textAlign: "center",
    fontFamily: _reactNative.Platform.OS === "ios" ? "Trebuchet MS" : null,
    color: "#34495e"
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTVEFSX0lNQUdFIiwicmVxdWlyZSIsIkhFQVJUX0lNQUdFIiwiUk9DS0VUX0lNQUdFIiwiQkVMTF9JTUFHRSIsIlRZUEVTIiwic3RhciIsInNvdXJjZSIsImNvbG9yIiwiYmFja2dyb3VuZENvbG9yIiwiaGVhcnQiLCJyb2NrZXQiLCJiZWxsIiwiY3VzdG9tIiwiZnJhY3Rpb25zVHlwZSIsInByb3BzIiwicHJvcE5hbWUiLCJjb21wb25lbnROYW1lIiwidmFsdWUiLCJFcnJvciIsIlN3aXBlUmF0aW5nIiwib25TdGFydFJhdGluZyIsIm9uU3dpcGVSYXRpbmciLCJvbkZpbmlzaFJhdGluZyIsImZyYWN0aW9ucyIsInBvc2l0aW9uIiwiQW5pbWF0ZWQiLCJWYWx1ZVhZIiwicGFuUmVzcG9uZGVyIiwiUGFuUmVzcG9uZGVyIiwiY3JlYXRlIiwib25TdGFydFNob3VsZFNldFBhblJlc3BvbmRlciIsIm9uUGFuUmVzcG9uZGVyR3JhbnQiLCJldmVudCIsImdlc3R1cmUiLCJuZXdQb3NpdGlvbiIsInRhcFBvc2l0aW9uWCIsIngwIiwic3RhdGUiLCJjZW50ZXJYIiwiZHgiLCJzZXRWYWx1ZSIsIngiLCJ5IiwiaXNDb21wb25lbnRNb3VudGVkIiwic2V0U3RhdGUiLCJyYXRpbmciLCJnZXRDdXJyZW50UmF0aW5nIiwib25QYW5SZXNwb25kZXJNb3ZlIiwib25QYW5SZXNwb25kZXJSZWxlYXNlIiwibWluVmFsdWUiLCJzZXRDdXJyZW50UmF0aW5nIiwiZGlzcGxheSIsInN0YXJ0aW5nVmFsdWUiLCJlcnIiLCJjb25zb2xlIiwibG9nIiwicHJldlByb3BzIiwicmF0aW5nUmVmIiwibWVhc3VyZSIsImZ4IiwiZnkiLCJ3aWR0aCIsImhlaWdodCIsInB4IiwiaGFsZldpZHRoIiwicGFnZVhXaXRoaW5XaW5kb3ciLCJEaW1lbnNpb25zIiwiZ2V0IiwiaW1hZ2VTaXplIiwicmF0aW5nQ291bnQiLCJ0eXBlIiwiaW50ZXJwb2xhdGUiLCJpbnB1dFJhbmdlIiwib3V0cHV0UmFuZ2UiLCJleHRyYXBvbGF0ZSIsInVzZU5hdGl2ZURyaXZlciIsInRpbnRDb2xvciIsInRpbWVzIiwiaW5kZXgiLCJzdHlsZXMiLCJzdGFyQ29udGFpbmVyIiwiY3VycmVudFJhdGluZyIsImRpZmYiLCJOdW1iZXIiLCJ0b0ZpeGVkIiwiTWF0aCIsImNlaWwiLCJqdW1wVmFsdWUiLCJpbml0aWFsUmF0aW5nIiwicmVhZG9ubHkiLCJzaG93UmVhZE9ubHlUZXh0IiwicmF0aW5nVGV4dENvbG9yIiwic2hvd1JhdGluZ1ZpZXciLCJyYXRpbmdWaWV3IiwicmF0aW5nVGV4dCIsImN1cnJlbnRSYXRpbmdUZXh0IiwibWF4UmF0aW5nVGV4dCIsInJlYWRvbmx5TGFiZWwiLCJyYXRpbmdJbWFnZSIsInJhdGluZ0NvbG9yIiwicmF0aW5nQmFja2dyb3VuZENvbG9yIiwic3R5bGUiLCJzaG93UmF0aW5nIiwiZGlzcGxheUN1cnJlbnRSYXRpbmciLCJzdGFyc1dyYXBwZXIiLCJwYW5IYW5kbGVycyIsInN0YXJzSW5zaWRlV3JhcHBlciIsImhhbmRsZUxheW91dENoYW5nZSIsInZpZXciLCJnZXRQcmltYXJ5Vmlld1N0eWxlIiwiZ2V0U2Vjb25kYXJ5Vmlld1N0eWxlIiwicmVuZGVyUmF0aW5ncyIsIkNvbXBvbmVudCIsImRlZmF1bHRQcm9wcyIsIlN0eWxlU2hlZXQiLCJmbGV4RGlyZWN0aW9uIiwianVzdGlmeUNvbnRlbnQiLCJhbGlnbkl0ZW1zIiwidG9wIiwibGVmdCIsInJpZ2h0IiwiYm90dG9tIiwicGFkZGluZ0JvdHRvbSIsImZvbnRTaXplIiwidGV4dEFsaWduIiwiZm9udEZhbWlseSIsIlBsYXRmb3JtIiwiT1MiXSwic291cmNlcyI6WyJTd2lwZVJhdGluZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgdGltZXMgZnJvbSBcImxvZGFzaC90aW1lc1wiO1xuaW1wb3J0IHsgVmlldywgVGV4dCwgQW5pbWF0ZWQsIFBhblJlc3BvbmRlciwgSW1hZ2UsIFN0eWxlU2hlZXQsIFBsYXRmb3JtLCBEaW1lbnNpb25zIH0gZnJvbSBcInJlYWN0LW5hdGl2ZVwiO1xuLy8gUkFUSU5HIElNQUdFUyBXSVRIIFNUQVRJQyBCQUNLR1JPVU5EIENPTE9SICh3aGl0ZSlcbmNvbnN0IFNUQVJfSU1BR0UgPSByZXF1aXJlKFwiLi9pbWFnZXMvc3Rhci5wbmdcIik7XG5jb25zdCBIRUFSVF9JTUFHRSA9IHJlcXVpcmUoXCIuL2ltYWdlcy9oZWFydC5wbmdcIik7XG5jb25zdCBST0NLRVRfSU1BR0UgPSByZXF1aXJlKFwiLi9pbWFnZXMvcm9ja2V0LnBuZ1wiKTtcbmNvbnN0IEJFTExfSU1BR0UgPSByZXF1aXJlKFwiLi9pbWFnZXMvYmVsbC5wbmdcIik7XG5jb25zdCBUWVBFUyA9IHtcbiAgICBzdGFyOiB7XG4gICAgICAgIHNvdXJjZTogU1RBUl9JTUFHRSxcbiAgICAgICAgY29sb3I6IFwiI2YxYzQwZlwiLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwid2hpdGVcIlxuICAgIH0sXG4gICAgaGVhcnQ6IHtcbiAgICAgICAgc291cmNlOiBIRUFSVF9JTUFHRSxcbiAgICAgICAgY29sb3I6IFwiI2U3NGMzY1wiLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwid2hpdGVcIlxuICAgIH0sXG4gICAgcm9ja2V0OiB7XG4gICAgICAgIHNvdXJjZTogUk9DS0VUX0lNQUdFLFxuICAgICAgICBjb2xvcjogXCIjMmVjYzcxXCIsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJ3aGl0ZVwiXG4gICAgfSxcbiAgICBiZWxsOiB7XG4gICAgICAgIHNvdXJjZTogQkVMTF9JTUFHRSxcbiAgICAgICAgY29sb3I6IFwiI2YzOWMxMlwiLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwid2hpdGVcIlxuICAgIH0sXG4gICAgY3VzdG9tOiB7fVxufTtcbmNvbnN0IGZyYWN0aW9uc1R5cGUgPSAocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lKSA9PiB7XG4gICAgaWYgKHByb3BzW3Byb3BOYW1lXSkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHByb3BzW3Byb3BOYW1lXTtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlID49IDAgJiYgdmFsdWUgPD0gMjAgP1xuICAgICAgICAgICAgICAgIG51bGwgOlxuICAgICAgICAgICAgICAgIG5ldyBFcnJvcihgXFxgJHtwcm9wTmFtZX1cXGAgaW4gXFxgJHtjb21wb25lbnROYW1lfVxcYCBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMjBgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEVycm9yKGBcXGAke3Byb3BOYW1lfVxcYCBpbiBcXGAke2NvbXBvbmVudE5hbWV9XFxgIG11c3QgYmUgYSBudW1iZXJgKTtcbiAgICB9XG59O1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3dpcGVSYXRpbmcgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgY29uc3QgeyBvblN0YXJ0UmF0aW5nLCBvblN3aXBlUmF0aW5nLCBvbkZpbmlzaFJhdGluZywgZnJhY3Rpb25zIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBjb25zdCBwb3NpdGlvbiA9IG5ldyBBbmltYXRlZC5WYWx1ZVhZKCk7XG4gICAgICAgIGNvbnN0IHBhblJlc3BvbmRlciA9IFBhblJlc3BvbmRlci5jcmVhdGUoe1xuICAgICAgICAgICAgb25TdGFydFNob3VsZFNldFBhblJlc3BvbmRlcjogKCkgPT4gdHJ1ZSxcbiAgICAgICAgICAgIG9uUGFuUmVzcG9uZGVyR3JhbnQ6IChldmVudCwgZ2VzdHVyZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1Bvc2l0aW9uID0gbmV3IEFuaW1hdGVkLlZhbHVlWFkoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXBQb3NpdGlvblggPSBnZXN0dXJlLngwIC0gdGhpcy5zdGF0ZS5jZW50ZXJYICsgZ2VzdHVyZS5keDtcbiAgICAgICAgICAgICAgICBuZXdQb3NpdGlvbi5zZXRWYWx1ZSh7IHg6IHRhcFBvc2l0aW9uWCwgeTogMCB9KTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5pc0NvbXBvbmVudE1vdW50ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHBvc2l0aW9uOiBuZXdQb3NpdGlvbiwgdmFsdWU6IHRhcFBvc2l0aW9uWCB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmF0aW5nID0gdGhpcy5nZXRDdXJyZW50UmF0aW5nKHRhcFBvc2l0aW9uWCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb25TdGFydFJhdGluZyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvblN0YXJ0UmF0aW5nKHJhdGluZyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25QYW5SZXNwb25kZXJNb3ZlOiAoZXZlbnQsIGdlc3R1cmUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdQb3NpdGlvbiA9IG5ldyBBbmltYXRlZC5WYWx1ZVhZKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFwUG9zaXRpb25YID0gZ2VzdHVyZS54MCAtIHRoaXMuc3RhdGUuY2VudGVyWCArIGdlc3R1cmUuZHg7XG4gICAgICAgICAgICAgICAgbmV3UG9zaXRpb24uc2V0VmFsdWUoeyB4OiB0YXBQb3NpdGlvblgsIHk6IDAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNDb21wb25lbnRNb3VudGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBwb3NpdGlvbjogbmV3UG9zaXRpb24sIHZhbHVlOiB0YXBQb3NpdGlvblggfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhdGluZyA9IHRoaXMuZ2V0Q3VycmVudFJhdGluZyh0YXBQb3NpdGlvblgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9uU3dpcGVSYXRpbmcgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgb25Td2lwZVJhdGluZyhyYXRpbmcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uUGFuUmVzcG9uZGVyUmVsZWFzZTogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJhdGluZyA9IHRoaXMuZ2V0Q3VycmVudFJhdGluZyh0aGlzLnN0YXRlLnZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAocmF0aW5nID49IHRoaXMucHJvcHMubWluVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmcmFjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICdyb3VuZCB1cCcgdG8gdGhlIG5lYXJlc3QgcmF0aW5nIGltYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEN1cnJlbnRSYXRpbmcocmF0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9uRmluaXNoUmF0aW5nID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRmluaXNoUmF0aW5nKHJhdGluZyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgcGFuUmVzcG9uZGVyLFxuICAgICAgICAgICAgcG9zaXRpb24sXG4gICAgICAgICAgICBkaXNwbGF5OiBmYWxzZSxcbiAgICAgICAgICAgIGlzQ29tcG9uZW50TW91bnRlZDogZmFsc2VcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZGlzcGxheTogdHJ1ZSwgaXNDb21wb25lbnRNb3VudGVkOiB0cnVlIH0sICgpID0+IHRoaXMuc2V0Q3VycmVudFJhdGluZyh0aGlzLnByb3BzLnN0YXJ0aW5nVmFsdWUpKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLnN0YXJ0aW5nVmFsdWUgIT09IHByZXZQcm9wcy5zdGFydGluZ1ZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnNldEN1cnJlbnRSYXRpbmcodGhpcy5wcm9wcy5zdGFydGluZ1ZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVMYXlvdXRDaGFuZ2UoKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtcGFyYW1zXG4gICAgICAgIHRoaXMucmF0aW5nUmVmLm1lYXN1cmUoKGZ4LCBmeSwgd2lkdGgsIGhlaWdodCwgcHgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGhhbGZXaWR0aCA9IHdpZHRoIC8gMjtcbiAgICAgICAgICAgIGNvbnN0IHBhZ2VYV2l0aGluV2luZG93ID0gcHggJSBEaW1lbnNpb25zLmdldChcIndpbmRvd1wiKS53aWR0aDtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIGNlbnRlclg6IHBhZ2VYV2l0aGluV2luZG93ICsgaGFsZldpZHRoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldFByaW1hcnlWaWV3U3R5bGUoKSB7XG4gICAgICAgIGNvbnN0IHsgcG9zaXRpb24gfSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIGNvbnN0IHsgaW1hZ2VTaXplLCByYXRpbmdDb3VudCwgdHlwZSB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgY29uc3QgeyBjb2xvciB9ID0gVFlQRVNbdHlwZV07XG4gICAgICAgIGNvbnN0IHdpZHRoID0gcG9zaXRpb24ueC5pbnRlcnBvbGF0ZSh7XG4gICAgICAgICAgICBpbnB1dFJhbmdlOiBbXG4gICAgICAgICAgICAgICAgLXJhdGluZ0NvdW50ICogKGltYWdlU2l6ZSAvIDIpLFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgcmF0aW5nQ291bnQgKiAoaW1hZ2VTaXplIC8gMilcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBvdXRwdXRSYW5nZTogW1xuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgcmF0aW5nQ291bnQgKiBpbWFnZVNpemUgLyAyLFxuICAgICAgICAgICAgICAgIHJhdGluZ0NvdW50ICogaW1hZ2VTaXplXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgZXh0cmFwb2xhdGU6IFwiY2xhbXBcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB1c2VOYXRpdmVEcml2ZXI6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGNvbG9yLFxuICAgICAgICAgICAgd2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IHdpZHRoID8gaW1hZ2VTaXplIDogMFxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXRTZWNvbmRhcnlWaWV3U3R5bGUoKSB7XG4gICAgICAgIGNvbnN0IHsgcG9zaXRpb24gfSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIGNvbnN0IHsgaW1hZ2VTaXplLCByYXRpbmdDb3VudCwgdHlwZSB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgY29uc3QgeyBiYWNrZ3JvdW5kQ29sb3IgfSA9IFRZUEVTW3R5cGVdO1xuICAgICAgICBjb25zdCB3aWR0aCA9IHBvc2l0aW9uLnguaW50ZXJwb2xhdGUoe1xuICAgICAgICAgICAgaW5wdXRSYW5nZTogW1xuICAgICAgICAgICAgICAgIC1yYXRpbmdDb3VudCAqIChpbWFnZVNpemUgLyAyKSxcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIHJhdGluZ0NvdW50ICogKGltYWdlU2l6ZSAvIDIpXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgb3V0cHV0UmFuZ2U6IFtcbiAgICAgICAgICAgICAgICByYXRpbmdDb3VudCAqIGltYWdlU2l6ZSxcbiAgICAgICAgICAgICAgICByYXRpbmdDb3VudCAqIGltYWdlU2l6ZSAvIDIsXG4gICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGV4dHJhcG9sYXRlOiBcImNsYW1wXCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdXNlTmF0aXZlRHJpdmVyOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yLFxuICAgICAgICAgICAgd2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IHdpZHRoID8gaW1hZ2VTaXplIDogMFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZW5kZXJSYXRpbmdzKCkge1xuICAgICAgICBjb25zdCB7IGltYWdlU2l6ZSwgcmF0aW5nQ291bnQsIHR5cGUsIHRpbnRDb2xvciB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgY29uc3QgeyBzb3VyY2UgfSA9IFRZUEVTW3R5cGVdO1xuICAgICAgICByZXR1cm4gdGltZXMocmF0aW5nQ291bnQsIGluZGV4ID0+IDxWaWV3IGtleT17aW5kZXh9IHN0eWxlPXtzdHlsZXMuc3RhckNvbnRhaW5lcn0+XG4gICAgICAgIDxJbWFnZSBzb3VyY2U9e3NvdXJjZX0gc3R5bGU9e3sgd2lkdGg6IGltYWdlU2l6ZSwgaGVpZ2h0OiBpbWFnZVNpemUsIHRpbnRDb2xvciB9fS8+XG4gICAgICA8L1ZpZXc+KTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1zdGF0ZW1lbnRzXG4gICAgZ2V0Q3VycmVudFJhdGluZyh2YWx1ZSkge1xuICAgICAgICBjb25zdCB7IGZyYWN0aW9ucywgaW1hZ2VTaXplLCByYXRpbmdDb3VudCB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgY29uc3Qgc3RhcnRpbmdWYWx1ZSA9IHJhdGluZ0NvdW50IC8gMjtcbiAgICAgICAgbGV0IGN1cnJlbnRSYXRpbmcgPSB0aGlzLnByb3BzLm1pblZhbHVlID8gdGhpcy5wcm9wcy5taW5WYWx1ZSA6IDA7XG4gICAgICAgIGlmICh2YWx1ZSA+IHJhdGluZ0NvdW50ICogaW1hZ2VTaXplIC8gMikge1xuICAgICAgICAgICAgY3VycmVudFJhdGluZyA9IHJhdGluZ0NvdW50O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHZhbHVlIDwgLXJhdGluZ0NvdW50ICogaW1hZ2VTaXplIC8gMikge1xuICAgICAgICAgICAgY3VycmVudFJhdGluZyA9IHRoaXMucHJvcHMubWluVmFsdWUgPyB0aGlzLnByb3BzLm1pblZhbHVlIDogMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSA8PSBpbWFnZVNpemUgfHwgdmFsdWUgPiBpbWFnZVNpemUpIHtcbiAgICAgICAgICAgIGNvbnN0IGRpZmYgPSB2YWx1ZSAvIGltYWdlU2l6ZTtcbiAgICAgICAgICAgIGN1cnJlbnRSYXRpbmcgPSBzdGFydGluZ1ZhbHVlICsgZGlmZjtcbiAgICAgICAgICAgIGN1cnJlbnRSYXRpbmcgPSBmcmFjdGlvbnMgP1xuICAgICAgICAgICAgICAgIE51bWJlcihjdXJyZW50UmF0aW5nLnRvRml4ZWQoZnJhY3Rpb25zKSkgOlxuICAgICAgICAgICAgICAgIE1hdGguY2VpbChjdXJyZW50UmF0aW5nKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGN1cnJlbnRSYXRpbmcgPSBmcmFjdGlvbnMgP1xuICAgICAgICAgICAgICAgIE51bWJlcihzdGFydGluZ1ZhbHVlLnRvRml4ZWQoZnJhY3Rpb25zKSkgOlxuICAgICAgICAgICAgICAgIE1hdGguY2VpbChzdGFydGluZ1ZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcm9wcy5qdW1wVmFsdWUgPiAwICYmXG4gICAgICAgICAgICB0aGlzLnByb3BzLmp1bXBWYWx1ZSA8IHRoaXMucHJvcHMucmF0aW5nQ291bnQpIHtcbiAgICAgICAgICAgIHJldHVybiAoTWF0aC5jZWlsKGN1cnJlbnRSYXRpbmcgKiAoMSAvIHRoaXMucHJvcHMuanVtcFZhbHVlKSkgL1xuICAgICAgICAgICAgICAgICgxIC8gdGhpcy5wcm9wcy5qdW1wVmFsdWUpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50UmF0aW5nO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtc3RhdGVtZW50c1xuICAgIHNldEN1cnJlbnRSYXRpbmcocmF0aW5nKSB7XG4gICAgICAgIGNvbnN0IHsgaW1hZ2VTaXplLCByYXRpbmdDb3VudCB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgLy8gYGluaXRpYWxSYXRpbmdgIGNvcnJlc3BvbmRzIHRvIGBzdGFydGluZ1ZhbHVlYCBpbiB0aGUgZ2V0dGVyLiBOYW1pbmcgaXRcbiAgICAgICAgLy8gRGlmZmVyZW50bHkgaGVyZSBhdm9pZHMgY29uZnVzaW9uIHdpdGggYHZhbHVlYCBiZWxvdy5cbiAgICAgICAgY29uc3QgaW5pdGlhbFJhdGluZyA9IHJhdGluZ0NvdW50IC8gMjtcbiAgICAgICAgbGV0IHZhbHVlID0gbnVsbDtcbiAgICAgICAgaWYgKHJhdGluZyA+IHJhdGluZ0NvdW50KSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHJhdGluZ0NvdW50ICogaW1hZ2VTaXplIC8gMjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyYXRpbmcgPCAwKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IC1yYXRpbmdDb3VudCAqIGltYWdlU2l6ZSAvIDI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocmF0aW5nIDwgcmF0aW5nQ291bnQgLyAyIHx8IHJhdGluZyA+IHJhdGluZ0NvdW50IC8gMikge1xuICAgICAgICAgICAgdmFsdWUgPSAocmF0aW5nIC0gaW5pdGlhbFJhdGluZykgKiBpbWFnZVNpemU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YWx1ZSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV3UG9zaXRpb24gPSBuZXcgQW5pbWF0ZWQuVmFsdWVYWSgpO1xuICAgICAgICBuZXdQb3NpdGlvbi5zZXRWYWx1ZSh7IHg6IHZhbHVlLCB5OiAwIH0pO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5pc0NvbXBvbmVudE1vdW50ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBwb3NpdGlvbjogbmV3UG9zaXRpb24sIHZhbHVlIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRpc3BsYXlDdXJyZW50UmF0aW5nKCkge1xuICAgICAgICBjb25zdCB7IHJhdGluZ0NvdW50LCB0eXBlLCByZWFkb25seSwgc2hvd1JlYWRPbmx5VGV4dCwgcmF0aW5nVGV4dENvbG9yIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBjb25zdCBjb2xvciA9IHJhdGluZ1RleHRDb2xvciB8fCBUWVBFU1t0eXBlXS5jb2xvcjtcbiAgICAgICAgcmV0dXJuICg8VmlldyBzdHlsZT17c3R5bGVzLnNob3dSYXRpbmdWaWV3fT5cbiAgICAgICAgPFZpZXcgc3R5bGU9e3N0eWxlcy5yYXRpbmdWaWV3fT5cbiAgICAgICAgICA8VGV4dCBzdHlsZT17W3N0eWxlcy5yYXRpbmdUZXh0LCB7IGNvbG9yIH1dfT5SYXRpbmc6IDwvVGV4dD5cbiAgICAgICAgICA8VGV4dCBzdHlsZT17W3N0eWxlcy5jdXJyZW50UmF0aW5nVGV4dCwgeyBjb2xvciB9XX0+XG4gICAgICAgICAgICB7dGhpcy5nZXRDdXJyZW50UmF0aW5nKHRoaXMuc3RhdGUudmFsdWUpfVxuICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICA8VGV4dCBzdHlsZT17W3N0eWxlcy5tYXhSYXRpbmdUZXh0LCB7IGNvbG9yIH1dfT4ve3JhdGluZ0NvdW50fTwvVGV4dD5cbiAgICAgICAgPC9WaWV3PlxuICAgICAgICA8Vmlldz5cbiAgICAgICAgICB7cmVhZG9ubHkgJiYgc2hvd1JlYWRPbmx5VGV4dCAmJlxuICAgICAgICAgICAgICAgIDxUZXh0IHN0eWxlPXtbc3R5bGVzLnJlYWRvbmx5TGFiZWwsIHsgY29sb3IgfV19PihyZWFkb25seSk8L1RleHQ+fVxuICAgICAgICA8L1ZpZXc+XG4gICAgICA8L1ZpZXc+KTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7IHJlYWRvbmx5LCB0eXBlLCByYXRpbmdJbWFnZSwgcmF0aW5nQ29sb3IsIHJhdGluZ0JhY2tncm91bmRDb2xvciwgc3R5bGUsIHNob3dSYXRpbmcgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGlmICh0eXBlID09PSBcImN1c3RvbVwiKSB7XG4gICAgICAgICAgICBjb25zdCBjdXN0b20gPSB7XG4gICAgICAgICAgICAgICAgc291cmNlOiByYXRpbmdJbWFnZSxcbiAgICAgICAgICAgICAgICBjb2xvcjogcmF0aW5nQ29sb3IsXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiByYXRpbmdCYWNrZ3JvdW5kQ29sb3JcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBUWVBFUy5jdXN0b20gPSBjdXN0b207XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuZGlzcGxheSA/XG4gICAgICAgICAgICA8VmlldyBwb2ludGVyRXZlbnRzPXtyZWFkb25seSA/IFwibm9uZVwiIDogXCJhdXRvXCJ9IHN0eWxlPXtzdHlsZX0+XG4gICAgICAgIHtzaG93UmF0aW5nICYmIHRoaXMuZGlzcGxheUN1cnJlbnRSYXRpbmcoKX1cbiAgICAgICAgPFZpZXcgc3R5bGU9e3N0eWxlcy5zdGFyc1dyYXBwZXJ9IHsuLi50aGlzLnN0YXRlLnBhblJlc3BvbmRlci5wYW5IYW5kbGVyc30+XG4gICAgICAgICAgPFZpZXcgc3R5bGU9e3N0eWxlcy5zdGFyc0luc2lkZVdyYXBwZXJ9IG9uTGF5b3V0PXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlTGF5b3V0Q2hhbmdlKCk7XG4gICAgICAgICAgICAgICAgfX0gcmVmPXt2aWV3ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYXRpbmdSZWYgPSB2aWV3O1xuICAgICAgICAgICAgICAgIH19PlxuICAgICAgICAgICAgPEFuaW1hdGVkLlZpZXcgc3R5bGU9e3RoaXMuZ2V0UHJpbWFyeVZpZXdTdHlsZSgpfS8+XG4gICAgICAgICAgICA8QW5pbWF0ZWQuVmlldyBzdHlsZT17dGhpcy5nZXRTZWNvbmRhcnlWaWV3U3R5bGUoKX0vPlxuICAgICAgICAgIDwvVmlldz5cbiAgICAgICAgICB7dGhpcy5yZW5kZXJSYXRpbmdzKCl9XG4gICAgICAgIDwvVmlldz5cbiAgICAgIDwvVmlldz4gOlxuICAgICAgICAgICAgbnVsbDtcbiAgICB9XG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc0NvbXBvbmVudE1vdW50ZWQ6IGZhbHNlIH0pO1xuICAgIH1cbn1cblN3aXBlUmF0aW5nLmRlZmF1bHRQcm9wcyA9IHtcbiAgICB0eXBlOiBcInN0YXJcIixcbiAgICByYXRpbmdJbWFnZTogU1RBUl9JTUFHRSxcbiAgICByYXRpbmdDb2xvcjogXCIjZjFjNDBmXCIsXG4gICAgcmF0aW5nQmFja2dyb3VuZENvbG9yOiBcIndoaXRlXCIsXG4gICAgcmF0aW5nQ291bnQ6IDUsXG4gICAgc2hvd1JlYWRPbmx5VGV4dDogdHJ1ZSxcbiAgICBpbWFnZVNpemU6IDQwLFxuICAgIG1pblZhbHVlOiAwLFxuICAgIGp1bXBWYWx1ZTogMFxufTtcbmNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgICBzdGFyc1dyYXBwZXI6IHtcbiAgICAgICAgZmxleERpcmVjdGlvbjogXCJyb3dcIixcbiAgICAgICAganVzdGlmeUNvbnRlbnQ6IFwiY2VudGVyXCIsXG4gICAgICAgIGFsaWduSXRlbXM6IFwiY2VudGVyXCJcbiAgICB9LFxuICAgIHN0YXJzSW5zaWRlV3JhcHBlcjoge1xuICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgICAgICB0b3A6IDAsXG4gICAgICAgIGxlZnQ6IDAsXG4gICAgICAgIHJpZ2h0OiAwLFxuICAgICAgICBib3R0b206IDAsXG4gICAgICAgIGZsZXhEaXJlY3Rpb246IFwicm93XCIsXG4gICAgICAgIGp1c3RpZnlDb250ZW50OiBcImNlbnRlclwiLFxuICAgICAgICBhbGlnbkl0ZW1zOiBcImNlbnRlclwiXG4gICAgfSxcbiAgICBzaG93UmF0aW5nVmlldzoge1xuICAgICAgICBmbGV4RGlyZWN0aW9uOiBcImNvbHVtblwiLFxuICAgICAgICBqdXN0aWZ5Q29udGVudDogXCJjZW50ZXJcIixcbiAgICAgICAgYWxpZ25JdGVtczogXCJjZW50ZXJcIixcbiAgICAgICAgcGFkZGluZ0JvdHRvbTogNVxuICAgIH0sXG4gICAgcmF0aW5nVmlldzoge1xuICAgICAgICBmbGV4RGlyZWN0aW9uOiBcInJvd1wiLFxuICAgICAgICBqdXN0aWZ5Q29udGVudDogXCJjZW50ZXJcIixcbiAgICAgICAgYWxpZ25JdGVtczogXCJjZW50ZXJcIixcbiAgICAgICAgcGFkZGluZ0JvdHRvbTogNVxuICAgIH0sXG4gICAgcmF0aW5nVGV4dDoge1xuICAgICAgICBmb250U2l6ZTogMTUsXG4gICAgICAgIHRleHRBbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgZm9udEZhbWlseTogUGxhdGZvcm0uT1MgPT09IFwiaW9zXCIgPyBcIlRyZWJ1Y2hldCBNU1wiIDogbnVsbCxcbiAgICAgICAgY29sb3I6IFwiIzM0NDk1ZVwiXG4gICAgfSxcbiAgICByZWFkb25seUxhYmVsOiB7XG4gICAgICAgIGp1c3RpZnlDb250ZW50OiBcImNlbnRlclwiLFxuICAgICAgICBhbGlnbkl0ZW1zOiBcImNlbnRlclwiLFxuICAgICAgICBmb250U2l6ZTogMTIsXG4gICAgICAgIHRleHRBbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgZm9udEZhbWlseTogUGxhdGZvcm0uT1MgPT09IFwiaW9zXCIgPyBcIlRyZWJ1Y2hldCBNU1wiIDogbnVsbCxcbiAgICAgICAgY29sb3I6IFwiIzM0NDk1YVwiXG4gICAgfSxcbiAgICBjdXJyZW50UmF0aW5nVGV4dDoge1xuICAgICAgICBmb250U2l6ZTogMzAsXG4gICAgICAgIHRleHRBbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgZm9udEZhbWlseTogUGxhdGZvcm0uT1MgPT09IFwiaW9zXCIgPyBcIlRyZWJ1Y2hldCBNU1wiIDogbnVsbFxuICAgIH0sXG4gICAgbWF4UmF0aW5nVGV4dDoge1xuICAgICAgICBmb250U2l6ZTogMTgsXG4gICAgICAgIHRleHRBbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgZm9udEZhbWlseTogUGxhdGZvcm0uT1MgPT09IFwiaW9zXCIgPyBcIlRyZWJ1Y2hldCBNU1wiIDogbnVsbCxcbiAgICAgICAgY29sb3I6IFwiIzM0NDk1ZVwiXG4gICAgfVxufSk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUEyRztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRTNHLElBQU1BLFVBQVUsR0FBR0MsT0FBTyxDQUFDLG1CQUFtQixDQUFDO0FBQy9DLElBQU1DLFdBQVcsR0FBR0QsT0FB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