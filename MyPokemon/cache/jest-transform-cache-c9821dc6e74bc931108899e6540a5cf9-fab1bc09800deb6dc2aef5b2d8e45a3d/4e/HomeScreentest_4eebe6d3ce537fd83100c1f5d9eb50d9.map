{"version":3,"names":["content","results","name","url","mock","map","p","global","fetch","require","beforeEach","resetMocks","test","mockResponseOnce","JSON","stringify","onResponse","jest","fn","onError","getAllPokemon","then","catch","finally","expect","toHaveBeenCalled","calls","toEqual","console","log","useFakeTimers","render","setOptions","getByText","act","runAllTimers","screen","toBeTruthy","toBeOnTheScreen"],"sources":["HomeScreen.test.js"],"sourcesContent":["import {render, screen, fireEvent, act} from '@testing-library/react-native';\nimport 'react-native';\nimport React from 'react';\nimport HomeScreen from '../UI/components/screens/HomeScreen';\nimport {getAllPokemon, getOnePokemon} from '../services/pokemonRequests';\nimport { Text } from 'react-native-elements';\n\nglobal.fetch = require('jest-fetch-mock');\n\nlet content = {\n  results: [\n    {\n      name: 'bulbasaur',\n      url: 'https://pokeapi.co/api/v2/pokemon/1/',\n    },\n    {\n      name: 'ivysaur',\n      url: 'https://pokeapi.co/api/v2/pokemon/2/',\n    },\n    {\n      name: 'venusaur',\n      url: 'https://pokeapi.co/api/v2/pokemon/3/',\n    },\n  ],\n};\n\njest.mock('../UI/components/Pokemon', () => () => {\n  return content.results.map(p => <div>{p.name}</div>);\n});\n\nbeforeEach(() => {\n  fetch.resetMocks();\n});\n\ntest('returns result if object', () => {\n  fetch.mockResponseOnce(JSON.stringify(content));\n  const onResponse = jest.fn();\n  const onError = jest.fn();\n  return getAllPokemon()\n    .then(onResponse)\n    .catch(onError)\n    .finally(() => {\n      expect(onResponse).toHaveBeenCalled();\n      expect(onResponse.mock.calls[0][0]).toEqual(content);\n      console.log(onResponse.mock.calls);\n    });\n});\n\ntest('Does home screen work', async () => {\n  fetch.mockResponseOnce(JSON.stringify(content));\n  jest.useFakeTimers();\n  const {getByText} = render(\n    <HomeScreen navigation={{setOptions: jest.fn()}} />,\n  );\n  act(() => {\n    jest.runAllTimers();\n  });\n  expect(screen.getByText('Please work')).toBeTruthy();\n  expect(screen.getByText('venusaur')).toBeOnTheScreen();\n\n  //const pokes = await screen.getAllByTestId('bob');\n  //expect(pokes).toHaveLength(3);\n});\n"],"mappings":";;IASIA,OAAO,GAAG;EACZC,OAAO,EAAE,CACP;IACEC,IAAI,EAAE,WAAW;IACjBC,GAAG,EAAE;EACP,CAAC,EACD;IACED,IAAI,EAAE,SAAS;IACfC,GAAG,EAAE;EACP,CAAC,EACD;IACED,IAAI,EAAE,UAAU;IAChBC,GAAG,EAAE;EACP,CAAC;AAEL,CAAC;AAED,cAAKC,IAAI,CAAC,0BAA0B,EAAE;EAAA,OAAM,YAAM;IAChD,OAAOJ,OAAO,CAACC,OAAO,CAACI,GAAG,CAAC,UAAAC,CAAC;MAAA,OAAI;QAAA,UAAMA,CAAC,CAACJ;MAAI,EAAO;IAAA,EAAC;EACtD,CAAC;AAAA,EAAC;AAAC;AAAA;AA5BH;AACA;AACA;AACA;AACA;AACA;AAA6C;AAAA;EAAA;IAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAE7CK,MAAM,CAACC,KAAK,GAAGC,OAAO,CAAC,iBAAiB,CAAC;AAuBzCC,UAAU,CAAC,YAAM;EACfF,KAAK,CAACG,UAAU,EAAE;AACpB,CAAC,CAAC;AAEFC,IAAI,CAAC,0BAA0B,EAAE,YAAM;EACrCJ,KAAK,CAACK,gBAAgB,CAACC,IAAI,CAACC,SAAS,CAACf,OAAO,CAAC,CAAC;EAC/C,IAAMgB,UAAU,GAAGC,IAAI,CAACC,EAAE,EAAE;EAC5B,IAAMC,OAAO,GAAGF,IAAI,CAACC,EAAE,EAAE;EACzB,OAAO,IAAAE,8BAAa,GAAE,CACnBC,IAAI,CAACL,UAAU,CAAC,CAChBM,KAAK,CAACH,OAAO,CAAC,CACdI,OAAO,CAAC,YAAM;IACbC,MAAM,CAACR,UAAU,CAAC,CAACS,gBAAgB,EAAE;IACrCD,MAAM,CAACR,UAAU,CAACZ,IAAI,CAACsB,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACC,OAAO,CAAC3B,OAAO,CAAC;IACpD4B,OAAO,CAACC,GAAG,CAACb,UAAU,CAACZ,IAAI,CAACsB,KAAK,CAAC;EACpC,CAAC,CAAC;AACN,CAAC,CAAC;AAEFd,IAAI,CAAC,uBAAuB,kCAAE,aAAY;EACxCJ,KAAK,CAACK,gBAAgB,CAACC,IAAI,CAACC,SAAS,CAACf,OAAO,CAAC,CAAC;EAC/CiB,IAAI,CAACa,aAAa,EAAE;EACpB,cAAoB,IAAAC,mBAAM,EACxB,qBAAC,mBAAU;MAAC,UAAU,EAAE;QAACC,UAAU,EAAEf,IAAI,CAACC,EAAE;MAAE;IAAE,EAAG,CACpD;IAFMe,SAAS,WAATA,SAAS;EAGhB,IAAAC,gBAAG,EAAC,YAAM;IACRjB,IAAI,CAACkB,YAAY,EAAE;EACrB,CAAC,CAAC;EACFX,MAAM,CAACY,mBAAM,CAACH,SAAS,CAAC,aAAa,CAAC,CAAC,CAACI,UAAU,EAAE;EACpDb,MAAM,CAACY,mBAAM,CAACH,SAAS,CAAC,UAAU,CAAC,CAAC,CAACK,eAAe,EAAE;AAIxD,CAAC,EAAC"}